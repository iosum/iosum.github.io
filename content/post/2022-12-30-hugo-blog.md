---
layout: post
title: Hugo 安裝在 Github pages，並使用客製化 Domain
author: Casey
date: 2022-12-30
categories: tutorials
tags: hugo
draft: true
---

## 本篇討論重點

1. 安裝 Hugo/Git
2. 新增一個套用 Hugo 主題的 blog
3. 上傳到自己的 Github repository
4. 使用 Github Actions，自動部屬到 Github pages
5. 使用 Custom Domain  (這需要付費買 Domain，免費仔可以不用看)


### 安裝 Hugo/Git

1. [下載 Hugo](https://gohugo.io/installation/)

    需將 bin 加到環境變數。

    可以用 `hugo --version` 來看是否安裝成功。

### 新增一個套用 Hugo 主題的 blog

可以先去看看想要哪一個主題，[網址在這](https://themes.gohugo.io/)
我的 blog 使用的是 `tania` [這一個主題](https://themes.gohugo.io/themes/hugo-tania/)

```
--新增一個 hugo site，folder的名稱叫做blog
hugo new site blog 
```

```
--進入 blog folder
cd blog 
```

```
--初始化 git
git init 
```

```
-- 加入主題
git submodule add git submodule add https://github.com/WingLim/hugo-tania themes/hugo-tania 
```

```
-- 啟動本機伺服器
hugo server 
```

### 上傳到自己的 Github repository

將 repository 名稱設定為 `{username}.github.io`，一定要是這一個格式

### 使用 Github Actions，自動部屬到 Github pages

有 2 種方法

1. 直接在專案新增 `.github\workflows\main.yml`，並將以下的 code 貼上

```yml
name: github pages

on:
  push:
    branches:
      - main  # 如果有東西push到這隻branch時會觸發github action，如果你的主branch是master或是其他名稱，就自己換過去
  pull_request: # 再提交PR時會觸發github action(但只會用來測試編譯有沒有過，不會正式部屬)

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: true  # Fetch Hugo themes (true OR recursive)
          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: latest
          extended: true # 建議加上去，不然有可能會收到scss編譯錯誤

      - name: Build
        run: hugo --minify # 編譯

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        if: github.ref == 'refs/heads/main' #如果有新的commit合併或是推送到main branch上，就執行deploy(如果你的主branch是master或是其他名稱，就自己換過去)
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
```

2. 在 Github 上使用 UI 方式設定


### 使用 Custom Domain

我使用的是 Google Domains，一年$350台幣，滿便宜的。

